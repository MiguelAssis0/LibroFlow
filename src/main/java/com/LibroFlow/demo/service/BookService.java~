package com.LibroFlow.demo.service;

import com.LibroFlow.demo.dtos.BooksDTO;
import com.LibroFlow.demo.entities.Books;
import com.LibroFlow.demo.repository.BooksRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.stereotype.Service;

@Service
public class BookService {
    @Autowired
    private BooksRepository bookRepository;

    public void createBook(BooksDTO dto){
        Books book = new Books(dto.getTitle(), dto.getAuthor(), dto.getGenre(), dto.getDescription(), dto.getPrice(), dto.getAvailable());
        bookRepository.save(book);
    }

    public Page<BooksDTO> findAllBooks(Pageable pageable){
        Page<Books> books = bookRepository.findAll(pageable);
        return books.map(book -> new BooksDTO(book.getId(), book.getTitle(), book.getAuthor(), book.getGenre(), book.getDescription(), book.getPrice(), book.getAvailable()));
    }

    public BooksDTO findByTitle(String title){
        Books book = bookRepository.findByTitle(title);
        return new BooksDTO(book.getId(), book.getTitle(), book.getAuthor(), book.getGenre(), book.getDescription(), book.getPrice(), book.getAvailable());
    }

    public void deleteBook(Long id){
        bookRepository.deleteById(id);
    }

    public void updateBook(BooksDTO dto){
        Books book = new Books()
        bookRepository.save(book);
    }
}
